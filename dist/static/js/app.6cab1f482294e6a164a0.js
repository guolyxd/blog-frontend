webpackJsonp([12],{"2hfY":function(e,t,o){"use strict";t.a=function(e){const t=new Date(e),o=(Date.now()-t)/1e3;if(o<30)return"刚刚";if(o<3600)return Math.ceil(o/60)+"分钟前";if(o<86400)return Math.ceil(o/3600)+"小时前";if(o<172800)return"1天前";return e}},"33ZO":function(e,t,o){"use strict";var n={name:"BaseHeader",props:{activeIndex:String,simple:{type:Boolean,default:!1}},data:()=>({}),computed:{user(){return{login:0!=this.$store.state.account.length,avatar:this.$store.state.avatar}}},methods:{logout(){let e=this;this.$store.dispatch("logout").then(()=>{this.$router.push({path:"/"})}).catch(t=>{"error"!==t&&e.$message({message:t,type:"error",showClose:!0})})}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-header",{staticClass:"me-area"},[n("el-row",{staticClass:"me-header"},[n("el-col",{staticClass:"me-header-left",attrs:{span:4}},[n("router-link",{staticClass:"me-title",attrs:{to:"/"}},[n("img",{attrs:{src:o("dLd/")}})])],1),e._v(" "),e.simple?[e._t("default")]:n("el-col",{attrs:{span:16}},[n("el-menu",{attrs:{router:!0,"menu-trigger":"click","active-text-color":"#5FB878","default-active":e.activeIndex,mode:"horizontal"}},[n("el-menu-item",{attrs:{index:"/"}},[e._v("首页")]),e._v(" "),n("el-menu-item",{attrs:{index:"/category/all"}},[e._v("文章分类")]),e._v(" "),n("el-menu-item",{attrs:{index:"/tag/all"}},[e._v("标签")]),e._v(" "),n("el-menu-item",{attrs:{index:"/archives"}},[e._v("文章归档")]),e._v(" "),n("el-col",{attrs:{span:4,offset:4}},[n("el-menu-item",{attrs:{index:"/write"}},[n("i",{staticClass:"el-icon-edit"}),e._v("写文章")])],1)],1)],1),e._v(" "),n("el-col",{attrs:{span:4}},[n("el-menu",{attrs:{router:!0,"menu-trigger":"click",mode:"horizontal","active-text-color":"#5FB878"}},[e.user.login?[n("el-submenu",{attrs:{index:""}},[n("template",{slot:"title"},[n("img",{staticClass:"me-header-picture",attrs:{src:e.user.avatar}})]),e._v(" "),n("el-menu-item",{attrs:{index:""},on:{click:e.logout}},[n("i",{staticClass:"el-icon-back"}),e._v("退出")])],2)]:[n("el-menu-item",{attrs:{index:"/login"}},[n("el-button",{attrs:{type:"text"}},[e._v("登录")])],1),e._v(" "),n("el-menu-item",{attrs:{index:"/register"}},[n("el-button",{attrs:{type:"text"}},[e._v("注册")])],1)]],2)],1)],2)],1)},staticRenderFns:[]};var r=o("VU/8")(n,a,!1,function(e){o("njJV")},null,null);t.a=r.exports},"7xIN":function(e,t){throw new Error("Module build failed: ModuleBuildError: Module build failed: Error: No PostCSS Config found in: /Users/Antony/github/blog-frontend/src/assets/icon\n    at /Users/Antony/github/blog-frontend/node_modules/postcss-load-config/src/index.js:91:15\n    at /Users/Antony/github/blog-frontend/node_modules/webpack/lib/NormalModule.js:195:19\n    at /Users/Antony/github/blog-frontend/node_modules/loader-runner/lib/LoaderRunner.js:367:11\n    at /Users/Antony/github/blog-frontend/node_modules/loader-runner/lib/LoaderRunner.js:233:18\n    at context.callback (/Users/Antony/github/blog-frontend/node_modules/loader-runner/lib/LoaderRunner.js:111:13)\n    at /Users/Antony/github/blog-frontend/node_modules/postcss-loader/lib/index.js:194:71")},GeOV:function(e,t){},IcnI:function(e,t,o){"use strict";var n=o("NYxO"),a=o("7+uW"),r=o("Moy7"),s=o("M9A7");a.default.use(n.a),t.a=new n.a.Store({state:{id:"",account:"",name:"",avatar:"",token:Object(r.a)()},mutations:{SET_TOKEN:(e,t)=>{e.token=t},SET_ACCOUNT:(e,t)=>{e.account=t},SET_NAME:(e,t)=>{e.name=t},SET_AVATAR:(e,t)=>{e.avatar=t},SET_ID:(e,t)=>{e.id=t}},actions:{login:({commit:e},t)=>new Promise((o,n)=>{Object(s.b)(t.account,t.password).then(t=>{t.success?(e("SET_TOKEN",t.data),Object(r.c)(t.data),o()):n(t.msg)}).catch(e=>{n(e)})}),getUserInfo:({commit:e,state:t})=>new Promise((o,n)=>{Object(s.a)(t.token).then(t=>{t.success?(e("SET_ACCOUNT",t.data.account),e("SET_NAME",t.data.nickname),e("SET_AVATAR",t.data.avatar),e("SET_ID",t.data.id),o(t)):(e("SET_ACCOUNT",""),e("SET_NAME",""),e("SET_AVATAR",""),e("SET_ID",""),Object(r.b)(),o(t))}).catch(t=>{e("SET_ACCOUNT",""),e("SET_NAME",""),e("SET_AVATAR",""),e("SET_ID",""),Object(r.b)(),n(t)})}),logout:({commit:e,state:t})=>new Promise((o,n)=>{Object(s.c)(t.token).then(t=>{t.success&&(e("SET_TOKEN",""),e("SET_ACCOUNT",""),e("SET_NAME",""),e("SET_AVATAR",""),e("SET_ID",""),Object(r.b)(),o())}).catch(e=>{n(e)})}),fedLogOut:({commit:e})=>new Promise(t=>{e("SET_TOKEN",""),e("SET_ACCOUNT",""),e("SET_NAME",""),e("SET_AVATAR",""),e("SET_ID",""),Object(r.b)(),t()}).catch(e=>{reject(e)}),register:({commit:e},t)=>new Promise((o,n)=>{Object(s.d)(t.account,t.nickname,t.password).then(t=>{t.success?(e("SET_TOKEN",t.data),Object(r.c)(t.data),o()):n(t.msg)}).catch(e=>{n(e)})})}})},M9A7:function(e,t,o){"use strict";t.b=function(e,t){const o={account:e,password:t};return Object(n.a)({url:"/login",method:"post",data:o})},t.c=function(e){return Object(n.a)({headers:{Authorization:e},url:"/logout",method:"get"})},t.a=function(e){return Object(n.a)({headers:{Authorization:e},url:"/users/currentUser",method:"get"})},t.d=function(e,t,o){const a={account:e,nickname:t,password:o};return Object(n.a)({url:"/register",method:"post",data:a})};var n=o("OOvn")},Moy7:function(e,t,o){"use strict";t.a=function(){return localStorage.token},t.c=function(e){return localStorage.token=e},t.b=function(){return localStorage.removeItem("token")}},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("7+uW"),a={name:"GoTop",data:()=>({topShow:!1}),methods:{toTop(){document.body.scrollTop=0,document.documentElement.scrollTop=0,this.topShow=!1},needToTop(){let e=document.documentElement.scrollTop||document.body.scrollTop;this.topShow=e>400}},mounted(){this.$nextTick(function(){window.addEventListener("scroll",this.needToTop)})}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("transition",[t("div",{directives:[{name:"show",rawName:"v-show",value:this.topShow,expression:"topShow"}],staticClass:"me-to-top",on:{click:this.toTop}},[t("i",{staticClass:"el-icon-caret-top"})])])},staticRenderFns:[]};var s={name:"App",components:{GoTop:o("VU/8")(a,r,!1,function(e){o("gaZc")},null,null).exports}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view"),this._v(" "),t("go-top")],1)},staticRenderFns:[]};var c=o("VU/8")(s,i,!1,function(e){o("aO6o")},null,null).exports,l=o("/ocq"),u={name:"BaseFooter",data:()=>({}),methods:{},mounted(){}},d={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-footer",{staticClass:"me-area"},[t("div",{staticClass:"me-footer"},[t("p",[this._v("Designed by\n      "),t("strong",[t("router-link",{staticClass:"me-login-design-color",attrs:{to:"/"}},[this._v("码神之路")])],1)])])])},staticRenderFns:[]};var m=o("VU/8")(u,d,!1,function(e){o("oVF/")},null,null).exports,h={name:"Home",data:()=>({activeIndex:"/",footerShow:!0}),components:{"base-header":o("33ZO").a,"base-footer":m},beforeRouteEnter(e,t,o){o(t=>{t.activeIndex=e.path})},beforeRouteUpdate(e,t,o){"/"==e.path?this.footerShow=!0:this.footerShow=!1,this.activeIndex=e.path,o()}},p={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"home"}},[t("el-container",[t("base-header",{attrs:{activeIndex:this.activeIndex}}),this._v(" "),t("router-view",{staticClass:"me-container"}),this._v(" "),t("base-footer",{directives:[{name:"show",rawName:"v-show",value:this.footerShow,expression:"footerShow"}]})],1)],1)},staticRenderFns:[]};var f=o("VU/8")(h,p,!1,function(e){o("GeOV")},null,null).exports,b=o("zL8q"),g=o.n(b),_=o("IcnI"),v=o("Moy7");n.default.use(l.a);const T=new l.a({routes:[{path:"/write/:id?",component:e=>Promise.all([o.e(0),o.e(3)]).then((()=>e(o("tgdm"))).bind(null,o)).catch(o.oe),meta:{requireLogin:!0}},{path:"",name:"Home",component:f,children:[{path:"/",component:e=>Promise.all([o.e(0),o.e(2)]).then((()=>e(o("mlqX"))).bind(null,o)).catch(o.oe)},{path:"/log",component:e=>o.e(6).then((()=>e(o("joCn"))).bind(null,o)).catch(o.oe)},{path:"/archives/:year?/:month?",component:e=>Promise.all([o.e(0),o.e(7)]).then((()=>e(o("3/TF"))).bind(null,o)).catch(o.oe)},{path:"/messageBoard",component:e=>o.e(8).then((()=>e(o("ncpC"))).bind(null,o)).catch(o.oe)},{path:"/view/:id",component:e=>Promise.all([o.e(0),o.e(1)]).then((()=>e(o("u66k"))).bind(null,o)).catch(o.oe)},{path:"/:type/all",component:e=>Promise.all([o.e(0),o.e(10)]).then((()=>e(o("4fko"))).bind(null,o)).catch(o.oe)},{path:"/:type/:id",component:e=>Promise.all([o.e(0),o.e(9)]).then((()=>e(o("8wPo"))).bind(null,o)).catch(o.oe)}]},{path:"/login",component:e=>o.e(4).then((()=>e(o("lmfZ"))).bind(null,o)).catch(o.oe)},{path:"/register",component:e=>o.e(5).then((()=>e(o("tcoL"))).bind(null,o)).catch(o.oe)}],scrollBehavior:(e,t,o)=>({x:0,y:0})});T.beforeEach((e,t,o)=>{Object(v.a)()?"/login"===e.path?o({path:"/"}):0===_.a.state.account.length?_.a.dispatch("getUserInfo").then(e=>{o()}).catch(()=>{Object(b.Message)({type:"warning",showClose:!0,message:"登录已过期"}),o({path:"/"})}):o():e.matched.some(e=>e.meta.requireLogin)?Object(b.Message)({type:"warning",showClose:!0,message:"请先登录哦"}):o()});var E=T,w=o("M4fF"),A=o.n(w),O=(o("fCJj"),o("7xIN"),o("2hfY"));n.default.config.productionTip=!1,n.default.use(g.a),Object.defineProperty(n.default.prototype,"$_",{value:A.a}),n.default.directive("title",function(e,t){document.title=e.dataset.title}),n.default.filter("format",O.a),new n.default({el:"#app",router:E,store:_.a,template:"<App/>",components:{App:c}})},OOvn:function(e,t,o){"use strict";var n=o("mtWM"),a=o.n(n),r=o("zL8q"),s=(o.n(r),o("IcnI")),i=o("Moy7");const c=a.a.create({baseURL:Object({NODE_ENV:"production"}).BASE_API,timeout:1e4});c.interceptors.request.use(e=>(s.a.state.token&&(e.headers["Oauth-Token"]=Object(i.a)()),e),e=>{Promise.reject(e)}),c.interceptors.response.use(e=>{"timeout"==e.headers.session_time_out&&s.a.dispatch("fedLogOut");const t=e.data;return 200!==t.code?90001===t.code?Promise.reject("error"):90002===t.code?(Object(r.Message)({type:"warning",showClose:!0,message:"未登录或登录超时，请重新登录哦"}),Promise.reject("error")):70001===t.code?(console.info("权限认证错误"),Object(r.Message)({type:"warning",showClose:!0,message:"你没有权限访问哦"}),Promise.reject("error")):Promise.reject(t.msg):e.data},e=>(Object(r.Message)({type:"warning",showClose:!0,message:"连接超时"}),Promise.reject("error"))),t.a=c},aO6o:function(e,t){},"dLd/":function(e,t,o){e.exports=o.p+"static/img/logo.b3a48c0.png"},fCJj:function(e,t){throw new Error("Module build failed: ModuleBuildError: Module build failed: Error: No PostCSS Config found in: /Users/Antony/github/blog-frontend/src/assets/theme\n    at /Users/Antony/github/blog-frontend/node_modules/postcss-load-config/src/index.js:91:15\n    at /Users/Antony/github/blog-frontend/node_modules/webpack/lib/NormalModule.js:195:19\n    at /Users/Antony/github/blog-frontend/node_modules/loader-runner/lib/LoaderRunner.js:367:11\n    at /Users/Antony/github/blog-frontend/node_modules/loader-runner/lib/LoaderRunner.js:233:18\n    at context.callback (/Users/Antony/github/blog-frontend/node_modules/loader-runner/lib/LoaderRunner.js:111:13)\n    at /Users/Antony/github/blog-frontend/node_modules/postcss-loader/lib/index.js:194:71")},gaZc:function(e,t){},njJV:function(e,t){},"oVF/":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.6cab1f482294e6a164a0.js.map